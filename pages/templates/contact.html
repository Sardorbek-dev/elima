{% extends 'base.html' %}
{% load static %}

{% block content %}
<nav class="breadcrumb mt-4">
    <a class="breadcrumb-item link-1 text-black-opacity text-uppercase" href="{% url 'home' %}">Главная</a>
    <span class="breadcrumb-item link-1 text-accent text-uppercase" aria-current="page">Контакты</span>
</nav>

<section class="map-section pt-4">
    <h1 class="heading-1 mb-5">Контакты</h1>
    <iframe src="https://snazzymaps.com/embed/642180" width="100%" height="430px" style="border:none;"></iframe>
</section>
<section class="history-section">
    <div class="row justify-content-between mb-4">
        <div class="col-lg-12">
            <h2 class="heading-2 mb-0">Наш офис</h2>
        </div>
    </div>
    <div class="row gy-4">
        <div class="col-lg-3 col-md-6">
            <div class="bg-grey border-radius-20 px-4 py-3 gap-5 d-flex flex-wrap h-100">
                <span class="description-2 text-uppercase w-100">Адрес</span>
                <p class="body-2 mb-0 mt-2">г. Ташкент, ул. Примерная, д. 123, офис 45</p>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="bg-grey border-radius-20 px-4 py-3 gap-4 d-flex flex-wrap h-100">
                <span class="description-2 text-uppercase w-100">График работы</span>
                <div class="d-flex flex-wrap">
                    <div class="d-flex mb-1 w-100 justify-content-between">
                        <span class="body-2">Пн-Пт</span>
                        <span class="body-2">9:00 - 18:00</span>
                    </div>
                    <div class="d-flex mb-1 w-100 justify-content-between">
                        <span class="body-2">Сб</span>
                        <span class="body-2">10:00 - 14:00</span>
                    </div>
                    <div class="d-flex mb-1 w-100 justify-content-between">
                        <span class="body-2">Вс</span>
                        <span class="body-2">выходной</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="bg-grey border-radius-20 px-4 py-3 gap-5 d-flex flex-wrap h-100">
                <div class="w-100">
                    <span class="description-2 text-uppercase d-block">Телефон</span>
                    <a href="tel:info@elima.uz" class="body-2 mb-0 text-accent text-decoration-none">+998 (71) 123-45-67</a>
                </div>
                <div>
                    <span class="description-2 text-uppercase d-block">Электронная почта</span>
                    <a href="mailto:info@elima.uz" class="body-2 mb-0 text-accent text-decoration-none">info@elima.uz</a>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="bg-grey border-radius-20 px-4 py-3 gap-5 d-flex flex-wrap h-100">
                <span class="description-2 text-uppercase d-block">Мы в соцсетях</span>
                <div class="d-flex flex-wrap w-100 mt-3">
                    <a href="#" title="" class="bg-accent-light icon-45 rounded-circle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                            <path fill="#006B3C" d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95" />
                        </svg>
                    </a>
                    <a href="#" title="" class="mx-2 bg-accent-light icon-45 rounded-circle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                            <path fill="#006B3C" d="M13.028 2c1.125.003 1.696.009 2.189.023l.194.007c.224.008.445.018.712.03c1.064.05 1.79.218 2.427.465c.66.254 1.216.598 1.772 1.153a4.9 4.9 0 0 1 1.153 1.772c.247.637.415 1.363.465 2.428c.012.266.022.487.03.712l.006.194c.015.492.021 1.063.023 2.188l.001.746v1.31a79 79 0 0 1-.023 2.188l-.006.194c-.008.225-.018.446-.03.712c-.05 1.065-.22 1.79-.466 2.428a4.9 4.9 0 0 1-1.153 1.772a4.9 4.9 0 0 1-1.772 1.153c-.637.247-1.363.415-2.427.465l-.712.03l-.194.006c-.493.014-1.064.021-2.189.023l-.746.001h-1.309a78 78 0 0 1-2.189-.023l-.194-.006a63 63 0 0 1-.712-.031c-1.064-.05-1.79-.218-2.428-.465a4.9 4.9 0 0 1-1.771-1.153a4.9 4.9 0 0 1-1.154-1.772c-.247-.637-.415-1.363-.465-2.428l-.03-.712l-.005-.194A79 79 0 0 1 2 13.028v-2.056a79 79 0 0 1 .022-2.188l.007-.194c.008-.225.018-.446.03-.712c.05-1.065.218-1.79.465-2.428A4.9 4.9 0 0 1 3.68 3.678a4.9 4.9 0 0 1 1.77-1.153c.638-.247 1.363-.415 2.428-.465c.266-.012.488-.022.712-.03l.194-.006a79 79 0 0 1 2.188-.023zM12 7a5 5 0 1 0 0 10a5 5 0 0 0 0-10m0 2a3 3 0 1 1 .001 6a3 3 0 0 1 0-6m5.25-3.5a1.25 1.25 0 0 0 0 2.5a1.25 1.25 0 0 0 0-2.5" />
                        </svg>
                    </a>
                    <a href="#" title="" class="bg-accent-light icon-45 rounded-circle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
                            <g fill="none" fill-rule="evenodd">
                                <path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z" />
                                <path fill="#006B3C" d="M19.777 4.43a1.5 1.5 0 0 1 2.062 1.626l-2.268 13.757c-.22 1.327-1.676 2.088-2.893 1.427c-1.018-.553-2.53-1.405-3.89-2.294c-.68-.445-2.763-1.87-2.507-2.884c.22-.867 3.72-4.125 5.72-6.062c.785-.761.427-1.2-.5-.5c-2.302 1.738-5.998 4.381-7.22 5.125c-1.078.656-1.64.768-2.312.656c-1.226-.204-2.363-.52-3.291-.905c-1.254-.52-1.193-2.244-.001-2.746z" />
                            </g>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="leaveRequest-section">
    <div class="row justify-content-between">
        <div class="col-lg-6">
            <h2 class="heading-3 mb-4">Заполните форму,<br>и мы свяжемся с вами в ближайшее<br>время</h2>
        </div>
        <div class="col-lg-6">
        <form id="contactForm" method="post">
            {% csrf_token %}
            <div class="mb-4">
                <label for="name" class="body-3 fw-semibold">Имя</label>
                <input type="text" name="name" class="form-control" id="name" placeholder="Ваше имя">
            </div>
            <div class="mb-4">
                <label for="email" class="body-3 fw-semibold">Электронная почта</label>
                <input type="email" name="email" class="form-control" id="email" placeholder="Почта">
            </div>
            <div class="mb-4">
                <label for="phone_number" class="body-3 fw-semibold">Телефон</label>
                <input type="number" name="phone_number" class="form-control" id="phone_number" placeholder="+998">
            </div>
            <div class="mb-4">
                <label for="message" class="body-3 fw-semibold">Сообщение</label>
                <textarea name="message" class="form-control" id="message" placeholder="Ваше сообщение" rows="3"></textarea>
            </div>
            <button type="submit" class="btn btn-accent px-5 mt-4 w-100-m">отправить</button>
            <div id="form-success" class="alert alert-success mt-4" style="display:none;">Ваш запрос успешно отправлен!</div>
        </form>
        </div>
    </div>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        $('#contactForm').on('submit', function (e) {
            e.preventDefault();

            // Clear previous error messages
            $('.error-message').remove();

            $.ajax({
                type: 'POST',
                url: '{% url "contact" %}',  // Ensure the URL is correct
                data: $(this).serialize(),
                success: function (response) {
                    if (response.success) {
                        $('#contactForm')[0].reset();
                        $('#form-success').show().delay(5000).fadeOut();
                    }
                },
                error: function (xhr) {
                    const errors = xhr.responseJSON.errors;
                    for (const key in errors) {
                        const inputField = $(`#${key}`);
                        if (inputField.length) {
                            const errorMessage = `<small class="text-danger error-message">${errors[key][0]}</small>`;
                            inputField.after(errorMessage);  // Append error message after the input field
                        }
                    }
                }
            });
        });
    });
</script>
{% endblock  %}